# üü© API

## SubscriptionKey (Chave de Acesso ou Chave de API)

No menu API o cliente tem acesso a chave de acesso da API, que ser√° utilizada para gerenciamento e controle das requisi√ß√µes realizadas via API, tamb√©m chamada Subscriptionkey. Uma vez que a chave √© gerada, ela deve ser inclu√≠da no HEADER das requisi√ß√µes para que estas sejam autorizadas.

<figure><img src="../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption><p>Clique na imagem para ampliar.</p></figcaption></figure>

**Unidade - Cliente:** Selecione neste campo o nome da unidade e cliente. Aqui s√£o listados todos os clientes que possuem o servi√ßo ArqAPI vigente no contrato.

Ao selecionar o campo, o bot√£o "Gerar: Par de Chaves" √© habilitado na tela.

**Chave 1:** Quando o cliente ainda n√£o possui chave gerada o campo √© apresentado em branco, quando o cliente j√° tem chave gerada √© apresentada a chave 1 gerada automaticamente pelo sistema.

**Chave 2:** Quando o cliente ainda n√£o possui chave gerada o campo √© apresentado em branco, quando o cliente j√° tem chave gerada √© apresentada a chave 2 gerada automaticamente pelo sistema.

{% hint style="info" %}
<mark style="color:blue;">Por</mark> <mark style="color:blue;"></mark><mark style="color:blue;">**padr√£o**</mark> <mark style="color:blue;"></mark><mark style="color:blue;">o sistema vai gerar sempre um</mark> <mark style="color:blue;"></mark><mark style="color:blue;">**"par" de chaves**</mark><mark style="color:blue;">, ent√£o o cliente poder√° utilizar</mark> <mark style="color:blue;"></mark><mark style="color:blue;">**uma ou outra**</mark> <mark style="color:blue;"></mark><mark style="color:blue;">ou em casos em que a integra√ß√£o ocorre com terceiros, o cliente utiliza uma e o parceiro outra.</mark>

<mark style="color:blue;">Uma vez que a chave √© gerada, ela deve ser inclu√≠da no HEADER das requisi√ß√µes para que estas sejam autorizadas.</mark>
{% endhint %}

Ao clicar em Gerar: Par de Chaves, √© exibida uma mensagem informativa na tela.

<figure><img src="../.gitbook/assets/image (44).png" alt=""><figcaption><p>Clique na imagem para ampliar.</p></figcaption></figure>

{% hint style="danger" %}
<mark style="color:red;">Se ap√≥s regerar as chaves, o usu√°rio n√£o atualiz√°-las nos par√¢metros de pesquisa da integra√ß√£o  j√° existente, as chamadas na API do ArqGED deixar√£o de funcionar!</mark>
{% endhint %}

Clique no √≠cone "Visualizar" para mostrar ou ocultar as chaves.

<figure><img src="../.gitbook/assets/image (45).png" alt=""><figcaption><p>Clique na imagem para ampliar.</p></figcaption></figure>

Para **regerar o par de chaves**, utilize o bot√£o **"Gerar: Par de Chaves".** Para **regerar apenas uma das chaves, utilize o** √≠cone de **"Regerar Chave"** considerando a chave 1 ou a 2.

<figure><img src="../.gitbook/assets/image (46).png" alt=""><figcaption><p>Clique na imagem para ampliar.</p></figcaption></figure>

Ser√° apresentada na tela a mensagem:&#x20;

<figure><img src="../.gitbook/assets/image (66).png" alt=""><figcaption><p>Clique na imagem para ampliar.</p></figcaption></figure>

{% hint style="danger" %}
<mark style="color:red;">Sempre que a chave for regerada, a anterior √© inativada automaticamente, sendo necess√°rio reconfigurar os paramentos da API em que a chave anterior foi inclu√≠da.</mark>
{% endhint %}

## Como passar a SubscriptionKey

Ao chamar a API na nova rota, ser√° necess√°rio enviar no ‚ÄúHeaders‚Äù a ‚ÄúSubscriptionKey‚Äù conforme figura abaixo:

<figure><img src="../.gitbook/assets/image.png" alt=""><figcaption><p>Clique na imagem para ampliar.</p></figcaption></figure>
